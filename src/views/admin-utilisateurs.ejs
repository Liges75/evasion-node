<%- include('partials/header') %>

<main class="container my-5">
  <h1 class="text-center mb-4">Liste des utilisateurs</h1>

  <table class="table table-hover align-middle text-center shadow-sm">
    <thead class="table-warning">
      <tr>
        <th>#</th>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Email</th>
        <th>Téléphone</th>
        <th>Rôle</th>
        <th>Adresse</th>
        <th>Code postal</th>
        <th>Ville</th>
        <th>Pays</th>
        <th>Date d’inscription</th>
      </tr>
    </thead>
    <tbody>
      <% if (users.length === 0) { %>
        <tr><td colspan="11" class="text-muted">Aucun utilisateur enregistré</td></tr>
      <% } else { %>
        <% users.forEach(user => { %>
          <tr>
            <td><%= user.id_user %></td>
            <td><%= user.nom_user %></td>
            <td><%= user.prenom_user %></td>
            <td><%= user.email_user %></td>
            <td><%= user.tel_user %></td>
            <td>
              <% if (user.nom_role === 'Administrateur') { %>
                <span class="badge bg-danger">Admin</span>
              <% } else if (user.nom_role === 'utilisateur') { %>
                <span class="badge bg-info text-dark">User</span>
              <% } else { %>
                <span class="badge bg-success">Client</span>
              <% } %>
            </td>
            <td>
              <%= user.rue || '—' %>
              <% if (user.complement) { %><br><small><%= user.complement %></small><% } %>
            </td>
            <td><%= user.code_postal || '—' %></td>
            <td><%= user.ville || '—' %></td>
            <td><%= user.pays || '—' %></td>
            <td><%= user.date_inscription %></td>
          </tr>
        <% }) %>
      <% } %>
    </tbody>
  </table>
</main>

<%- include('partials/footer') %>
